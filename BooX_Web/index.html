<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>BooX | Home</title>
	<link rel="stylesheet" type="text/css" href="css/mobile.css">
	<link rel="stylesheet" type="text/css" href="css/custom.css">
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<script src="js/mobile.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
</head>

<script>
function hover(x) {
	
	
	if(x.className == "ss"){	
		x.setAttribute('src', 'images/ss_hover.png');
		
	}
	
	if(x.className == "sb"){
		x.setAttribute('src', 'images/sb_hover.png');
	}
	
	if(x.className == "login"){
		x.setAttribute('src', 'images/login_hover.png');
	}
	
	if(x.className == "register"){
		x.setAttribute('src', 'images/register_hover.png');
	}
    
	
}

function normal(x) {
	if(x.className == "ss"){	
		x.setAttribute('src', 'images/ss.png');	
	}
	
	if(x.className == "sb"){
		x.setAttribute('src', 'images/sb.png');
	}
	
	if(x.className == "login"){
		x.setAttribute('src', 'images/login.png');
	}
	
	if(x.className == "register"){
		x.setAttribute('src', 'images/register.png');
	}
}

</script>


<body>
	<div id="page">
		<div id="header">
			<div id="navigation">
				<span id="mobile-navigation">&nbsp;</span>
				
				<ul id="menu1">
					<li class="selected">
						<a href="index.html">Home</a> &nbsp;&nbsp;|
					</li>
					<li>
						<a href="about.html">About</a>
					</li>
                </ul>
					<a href="index.html" class="logo"><img src="images/logo.jpg" alt=""></a>
			    <ul id="menu2">
                    <li>        
						<a href="contact.html">Contact</a> &nbsp;&nbsp;| 
					</li>
                    <li>
						<a href="team.html">Team</a>
					</li>
				</ul>
			</div>
		</div>
		<div id="body" class="home">
			<div class="header">
				<div>
					<h1>ENOSTAVNA<br>izmenjava študijske in druge literature</h1>
					
					<!-- ISKANJE -->

					<div>
						<form id="searchForm">
							<!-- Naslov -->
							<input type="text" placeholder="Title" name="naslov" id="naslov" />
							<!-- Avtor -->
							<input type="text" placeholder="Name of the Author" name="avtor" id="avtor" />
							<!-- Cena -->
							<select name="cena" id="cena">
								<option value="5">5€</option>
								<option value="10">10€</option>
								<option value="15">15€</option>
								<option value="20">20€</option>
								<option value="25">25€</option>
								<option value="30">30€</option>
								<option value="40">40€</option>
								<option value="50">50€</option>
								<option value="75">75€</option>
								<option value="100">100€</option>
							</select>
							<!-- Oblika -->
							<select name="oblika" id="oblika">
								<option value="">Choose form</option>
								<option value="1">Book</option>
								<option value="2">Book/PDF</option>
								<option value="3">Notes</option>
								<option value="4">Notes/PDF</option>
							</select>
							<!-- TODO pridobi vrednosti iz baze -->
							<script>
								$(document).ready(function() {
									// AJAX klici za sifrante
									// Profesor
									$.ajax({url: "./php/sifrant.php?table=profesor", success: function(result) {
										$("#profesor").append(result);
									}});
									// Fakulteta
									$.ajax({url: "./php/sifrant.php?table=fakulteta", success: function(result) {
										$("#fakulteta").append(result);
									}});
									// Predmet
									$.ajax({url: "./php/sifrant.php?table=predmet", success: function(result) {
										$("#predmet").append(result);
									}});
								});
							</script>
							<!-- Profesor -->
							<select name="profesor" id="profesor">
								<option value="">Choose professor</option>
							</select>
							<!-- Fakulteta -->
							<select name="fakulteta" id="fakulteta">
								<option value="">Choose university</option>
							</select>
							<!-- Predmet -->
							<select name="predmet" id="predmet">
								<option value="">Choose course</option>
							</select>
							<!-- ISČI -->
							<button type="submit">Search</button>
						</form>
					</div>

					<!-- div za rezultate -->
					<div id="results">

					</div>

					<!-- AJAX poizvedba na bazo -->
					<script type="text/javascript">
						$(document).ready(function() {
							$("#searchForm").submit(function() {
								// pocistimo morebitne prejsnje rezultate
								$("#results").empty();
								// dobimo input
								var naslov = $("#naslov").val();
								var avtor = $("#avtor").val();
								var cena = $("#cena").val();
								var oblika = $("#oblika").val();
								var profesor = $("#profesor").val();
								var fakulteta = $("#fakulteta").val();
								var predmet = $("#predmet").val();
								// sestavimo API klic
								var apiCall = "api.php/search";
								if (naslov != "") {
									apiCall += "/naslov/" + naslov;
								}
								if (cena != "") {
									apiCall += "/cenaDo/" + cena;
								}
								if (avtor != "") {
									apiCall += "/avtor/" + avtor;
								}
								if (oblika != "") {
									apiCall += "/oblika/" + oblika;
								}
								if (profesor != "") {
									apiCall += "/profesor/" + profesor;
								}
								if (fakulteta != "") {
									apiCall += "/fakulteta/" + fakulteta;
								}
								if (predmet != "") {
									apiCall += "/predmet/" + predmet;
								}
								console.log(apiCall);
								// ajax call
								$.ajax({url: apiCall, success: function(result) {
									var res = result;
									//console.log(res);
									var json = JSON.parse(result);
									console.log(json);
									// za vsako knjigo izpišemo podatke
									for (var i = 0; i < json.books.length; i++) {
										var k = json["books"][i]; 
										//console.log(k);
										var data = document.createElement("h4");
										data.innerHTML = "TITLE: " + k["ImeGradiva"] + " | UPLOADER: " + k["ImeUporabnika"] + " | PRICE: " + k["Cena"] + "€" + " | CONTACT: " + k["ImeUporabnika"] + "@gmail.com";
										$("#results").append(data);
									}
								}});
								return false;
							});
						});
					</script>

					<!-- end -->

					<img onclick="window.location.assign('snapSell.html')" onmouseover="hover(this)" onmouseout="normal(this)" src="images/ss.png" alt="" class="ss" style=" cursor: pointer; height: 300px; width: 310px; float: left; padding-top: 50px;">
                    <img onmouseover="hover(this)" onmouseout="normal(this)"src="images/sb.png" alt="" class="sb" style="height: 300px; width: 310px; float: right; padding-top: 50px;">
                    <img onclick="window.location.assign('login.html')" onmouseover="hover(this)" onmouseout="normal(this)"src="images/login.png" alt="" class="login" style=" cursor: pointer; height: 200px; width: 200x; padding-top: 10px;">
                    <img onclick="window.location.assign('register.html')" onmouseover="hover(this)" onmouseout="normal(this)"src="images/register.png"  alt="" class="register" style=" cursor: pointer; height: 200px; width: 200x; padding-top: 10px;">
                    
				</div>
			</div>
			<div class="body">
				<div>
					<h1>How does it work?</h1>
					<p>Read all about how Snap and sell technology works and how can it make your life easier.</p>
					<a href="about.html" class="more">Read More</a>
				</div>
			</div>
		</div>
		<div id="footer">
			<div>
				<div class="connect">
					<a href="" class="twitter">twitter</a>
					<a href="" class="facebook">facebook</a>
					<a href="" class="googleplus">googleplus</a>
				</div>
				<p>&copy; 2017 by BooX. All rights reserved.</p>
			</div>
		</div>
	</div>
</body>
</html>
